%lyluatextools support package.
%
% Copyright (C) 2015-2019 jperon and others (see CONTRIBUTORS.md)
% License: MIT
% This file is part of lua_options.

\NeedsTeXFormat{LaTeX2e}%
\ProvidesPackage{luaoptions}[2019/07/22 v0.8]

% Dependencies
\RequirePackage{luatexbase}
\RequirePackage{luaotfload}
\RequirePackage{xkeyval}

% Helper macro
\def\ly@load@module#1#2{
  \directlua{#1 = require(kpse.find_file("#2.lua") or "#2.lua")}
}

% Options
\DeclareOption{lib}{\ly@load@module{lua_options_lib}{luaoptions-lib}}
\DeclareOption{options}{\ly@load@module{lua_options}{luaoptions}}
\ProcessOptions

% If no option defined
\directlua{
  if not lua_options_lib and not lua_options then
    lua_options_lib = require(kpse.find_file("luaoptions-lib.lua") or "luaoptions-lib.lua")
    lua_options = require(kpse.find_file("luaoptions.lua") or "luaoptions.lua")
  end
}
